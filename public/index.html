<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>徐昌乾个人博客|程序员交流的平台</title>
		<meta name="keywords" content="个人博客,web博客,web前端博客,web前端个人博客"/>
		<meta name="description" content="web前端,前端开发,web前端技术交流,点滴的个人web前端博客"/>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="styles/reset.css"/>
		<link rel="stylesheet" type="text/css" href="styles/publick.css"/>
		<link rel="stylesheet" type="text/css" href="styles/index.css"/>
		<link rel="shortcut icon" href="images/shortcuticon.png"/>
		<link rel="stylesheet" type="text/css" href="styles/slide.css"/>
		<link rel="stylesheet" type="text/css" href="styles/responsive.css"/>
		<script src="scripts/jquery.min.js"></script>
		<script src="scripts/jquery.slide.js"></script>
		<script src="scripts/bannerConfig2.js"></script>
		<script src="scripts/beforeEffect.js"></script>
		<script src="scripts/jquery.tmpl.js"></script>
	</head>
	<body>
		<!--头部-->
		<header>
			<div class="autoBox welcome">
				欢迎光临徐昌乾个人博客网站!
			</div>
			<div class="autoBox">
				<nav>
					<p class="phoneNav"></p>
					<ul class="box1200">
						<li class="current"><a href="index.html">首页</a></li>
						<li><a href="webFore.html">web前端</a></li>				
						<li><a href="lifeStyle.html">爱生活</a></li>
						<li><a href="diary.html">日记</a></li>
						<li><a href="messageMe.html">给我留言</a></li>
						<li><a href="aboutMe.html">关于我</a></li>
					</ul>
					<div class="clear"></div>
				</nav>
			</div>
		</header>
		<div class="box1200">
			<!--位置-->
			<div class="position">
				<span class="icon icon_p"></span>
				<span><a href="index.html">首页</a></span>
				<div class="clear"></div>
			</div>
		</div>
		<!--轮播+关于我开始-->
		<div class="box1200 martop20">
			<!--轮播开始-->
			<div id="bannner">
				<div class="slideBox">
					<ul class="conBox">
						<li><img src="images/bannner-demo1.jpg"/></li>
						<li><img src="images/bannner-demo4.jpg"/></li>
						<li><img src="images/bannner-demo3.jpg"/></li>
						<li><img src="images/bannner-demo4.jpg"/></li>
						<li><img src="images/bannner-demo5.jpg"/></li>
					</ul>
					<ul class="control">
						<li>1</li>
						<li>2</li>
						<li>3</li>
					</ul>
					<ul class="arrow">
						<li class="arrowLeft"><</li>
						<li class="arrowRight">></li>
					</ul>
				</div>	
			</div>
			<!--关于我-->
			<div id="aboutMe">
				<!--标题-->
				<div class="title">
					<p class="attention">关注我</p>
					<ul class="social">
						<li class="icon s1" title="新浪微博"></li>
						<li class="icon s2" title="腾讯微博"></li>
						<li class="icon s3" title="QQ邮箱"></li>
						<li class="icon s4" title="QQ"></li>
						<div class="clear"></div>
					</ul>
				</div>
				<!--寄语-->
				<div class="motto">
					<img class="img1" src="images/leaf1.png"/>
					<img class="img2" src="images/leaf2.png"/>
					<img class="img3" src="images/leaf3.png"/>
					<img class="img4" src="images/leaf4.png"/>	
					不忘初心,方得始终
				</div>
				<!--个人简介-->
				<div class="brief">
					<img src="images/photo.jpg" alt="it520.site" title="徐昌乾个人博客"/>
					<p>姓名 : 徐昌乾</p>
					<p>职业 : web前端工程师</p>
					<p>主页 : it520.site</p>
					<p>现居 : 广东深圳</p>
				</div>
			</div>
			<!--清除浮动-->
			<div class="clear"></div>
			<!--轮播结束-->
		</div>
		<!--轮播+关于我结束-->
		<!--最新文章-->
		<div class="box1200 martop20" id="newArticle">
			<!--文章列表-->
			<h1>最新文章</h1>
			<article id="article">
				
			</article>
				<!--单个博客文章-->
				<script id="article_index" type="text/html">
					<div class="blogEssay">
						<!--图片-->
						<figure>
							<img src={{= imgUrl}} alt={{= classify}}/>
						</figure>
						<ul>
							<h3>
								<a href="article.html?id={{= _id}}" target="_blank">{{= title}}</a>
							</h3>
							<p class="con_index">
								
							</p>
							<p class="detailed"><a href="article.html?id={{= _id}}" target="_blank">[详情]</a></p>
							<p class="author">
								<span class="pTime fl icon">
									{{= ctime}}
								</span>
								<span class="help fr icon" helpid="{{= _id}}">{{= help}}</span>
								<span class="tips">+1</span>				
								<span class="skim fr icon">浏览{{= skim}}</span>
								<span class="comment fr icon"><a href="article.html?id={{= _id}}" target="_blank">评论{{= discuss}}</a></span>
							</p>
						</ul>
						<div class="clear"></div>
					</div>
				</script>
			
			<!--最新文章结束-->
			<!--技术探讨-->
			<div id="tecDiscussion">
				<dl id="tec">
					<dt>技术探讨</dt>
					<script id="tmpl_tecdis" type="text/html">
						<dd><span class="icon iconlist"></span><a href="article.html?id={{= _id}}" target="_blank">{{= title}}</a></dd>
					</script>
				</dl>	
				<dl id="life">
					<dt class="martop20">爱生活</dt>
					<script id="tmpl_life" type="text/html">
						<dd><span class="icon iconlist"></span><a href="article.html?id={{= _id}}" target="_blank">{{= title}}</a></dd>
					</script>
				</dl>	
				
			</div>
			<div class="clear"></div>
		</div>
		<div class="clear"></div>
		<!--分页-->
		<div class="box1200" id="pageBox">
			<ul id="page">
				
			</ul>
			<div class="clear"></div>
		</div>
		<!--页脚-->
		<footer>
			<div class="copyRight box1200">
				Copyright @&copy;" 2017 All rights reserved.
			</div>
		</footer>
		<!--返回顶部-->
		<ul id="backTop">
			<li class="icon top"></li>
			<li class="icon wechat"></li>
			<li class="icon" id="QRcode"></li>
		</ul>
		
		<script src="scripts/afterEffect.js"></script>
		<script src="scripts/baiduShare.js"></script>
		<script type="text/javascript">
				showlist();
				
				//显示文章列表
				function showlist(page){
					
					page = page || 1 ; //设置默认值 显示第一页数据
					//首页文章列表
					$.ajax({
						url:"/article_index.html?page="+page,
						type:"get",
						dataType:"json",
						success:function(data){
							var pagecount = data.pop(); //取出从服务器端返回的总页数
							//渲染模板
							$("#article").html($("#article_index").tmpl(data));
							
							var str='';
							if(page>1){ //当页码大于1 时  显示上一页
								str+='<li class="upPage"><a href="javascript:showlist('+(page-1)+');">上一页</a></li>';
							}
							
							for(var i=page-2; i<page+5; ++i){
								if(i<1){continue;} //当前页码小于1 跳出当前循环不显示
								if(i>pagecount){break;}
								
								if(i===page){
									str+='<li class="current"><a href="javascript:showlist('+i+');">'+i+'</a></li>';
								}else{
									str+='<li><a href="javascript:showlist('+i+');">'+i+'</a></li>';
								}
								
							}
							//当当前页面小于总页数
							if(page<pagecount){
								str+='<li class="downPage"><a href="javascript:showlist('+(page+1)+');">下一页</a></li>';
							}
							document.getElementById("page").innerHTML=str;
							showConList(data);
						}
					});
				}
					
				//技术探讨
				$.ajax({
					url:"/tecArticle_index.html",
					type:"get",
					dataType:"json",
					success:function(data){
						$("#tmpl_tecdis").tmpl(data).appendTo("#tec");
					}
				});
				
				//技术探讨
				$.ajax({
					url:"/lifeArticle_index.html",
					type:"get",
					dataType:"json",
					success:function(data){
						$("#tmpl_life").tmpl(data).appendTo("#life");
					}
				});
				
				
				function showConList(data){
					//文章列表显示部分内容
						var con_index = $('.con_index'),
							w = document.documentElement.clientWidth,
							con = "";
						console.log(data);
						for(var i=0; i<data.length; ++i){
							if(w<768){
								con = data[i].content.match(/[\u4e00-\u9fa5]/g).join("").substr(0,20);//只截取中文 取30个
							}else{
								con = data[i].content.match(/[\u4e00-\u9fa5]/g).join("").substr(0,50);//只截取中文 取50个
							}
							con_index[i].innerHTML = con+'...';
						}
				}
		</script>
	</body>
</html>
